{"version":3,"file":"js/144.3a360fa0.js","mappings":"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","sources":["webpack://vue_proyecto/./src/components/FormError.vue","webpack://vue_proyecto/./src/components/FormError.vue?24dc","webpack://vue_proyecto/./src/views/LoginView.vue","webpack://vue_proyecto/./src/views/LoginView.vue?5755"],"sourcesContent":["<template>\n    <div class=\"form__error\" id=\"formError\">\n        <p>{{ this.$props.message }}</p>\n    </div>\n</template>\n\n<script>\n    export default {\n        props: {\n            message: {type: String, required: false}\n        },\n    }\n</script>","import { render } from \"./FormError.vue?vue&type=template&id=7f90dda3\"\nimport script from \"./FormError.vue?vue&type=script&lang=js\"\nexport * from \"./FormError.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <section class=\"form__container\">\n        <h1>Iniciar sesi칩n</h1>\n        <form @submit.prevent=\"login\" class=\"form\">\n            <fieldset class=\"form__row\" id=\"formEmailContainer\">\n                <div class=\"form__column__small\">\n                    <label for=\"formEmail\" class=\"form__label\">Email</label>\n                </div>\n                <div class=\"form__column__big\">\n                    <input type=\"text\" v-model=\"formEmail\" id=\"formEmail\" name=\"email\" ref=\"formEmail\" class=\"form__input\" @blur=\"validateField(this.$refs.formEmail)\">\n                </div>\n            </fieldset>\n            <fieldset class=\"form__row\">\n                <div class=\"form__column__small\">\n                    <label for=\"formPassword\" class=\"form__label\">Contrase침a</label>\n                </div>\n                <div class=\"form__column__big\">\n                    <input type=\"password\" v-model=\"formPassword\" id=\"formPassword\" name=\"contrase침a\" ref=\"formPassword\" class=\"form__input\" @blur=\"validateField(this.$refs.formPassword)\">\n                </div>\n            </fieldset>\n            <fieldset class=\"form__row\">\n                <button @submit=\"login\" class=\"form__button\" ref=\"submitButton\" disabled>Login</button>\n            </fieldset>\n        </form>\n    </section>\n</template>\n\n<script>\n    import {useCookies} from '@vueuse/integrations/useCookies'\n    import { render, h } from 'vue'\n    import FormError from \"../components/FormError.vue\"\n    const cookies = useCookies([\"token\"])\n\n    export default {\n        data() {\n            return {\n                formEmail: \"\",\n                formPassword: \"\",\n            }\n        },\n        methods: {\n            async login() {\n                    const data = await fetch('http://localhost:8000/api/login', {\n                    method: \"post\",\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        email: this.formEmail,\n                        password: this.formPassword,\n                    })\n                })\n                const response = await data.json()\n                if (response.statusCode === 200) {\n                    cookies.set(\"token\", response.token, {maxAge: 86400, sameSite: \"strict\", path:\"/\"})\n                    this.$router.push(\"/profile\")\n                }\n                else {\n                    this.createLoginError()\n                }\n            },\n            validateField(field) {\n                const emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|.(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/\n                if (field.value === \"\") {\n                    this.createFormError(`Error, el campo ${field.name} debe tener un valor`, field.parentElement)\n                    return\n                }\n                else if (field.name === \"email\" && !field.value.toLowerCase().match(emailRegex)) {\n                    this.createFormError(`Error, el campo ${field.name} debe contener un email v치lido`, field.parentElement)\n                    return\n                }\n                this.removeFormError()\n                this.changeSubmitButton(emailRegex)\n            },\n            createLoginError() {\n                const formError = h(FormError, {message: 'Error de login, credenciales incorrectas'})\n                render(formError, this.$el)\n            },\n            createFormError(message, location) {\n                this.$refs.submitButton.setAttribute(\"disabled\", true)\n                const formError = h(FormError, {message: message})\n                render(formError, location)\n            },\n            removeFormError() {\n                const formError = document.querySelectorAll(\"#formError\")\n                formError.forEach((error) => {\n                    error.remove()\n                })\n            },\n            changeSubmitButton(emailRegex) {\n                if (this.$refs.formEmail.value !== \"\" && this.$refs.formEmail.value.toLowerCase().match(emailRegex) && this.$refs.formPassword.value !== \"\") {\n                    this.$refs.submitButton.removeAttribute(\"disabled\")\n                }\n            }\n        }\n    }\n</script>","import { render } from \"./LoginView.vue?vue&type=template&id=05e23964\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","id","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","$props","message","props","type","String","required","__exports__","render","for","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","login","_hoisted_3","_hoisted_4","_hoisted_5","$event","$data","formEmail","name","ref","onBlur","validateField","this","$refs","_hoisted_6","_hoisted_7","_hoisted_8","formPassword","_hoisted_9","disabled","cookies","useCookies","data","methods","fetch","method","headers","body","JSON","stringify","email","password","response","json","statusCode","set","token","maxAge","sameSite","path","$router","push","createLoginError","field","emailRegex","value","toLowerCase","match","removeFormError","changeSubmitButton","createFormError","parentElement","formError","h","FormError","$el","location","submitButton","setAttribute","document","querySelectorAll","forEach","error","remove","removeAttribute"],"sourceRoot":""}