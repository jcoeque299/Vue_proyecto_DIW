"use strict";(self["webpackChunkvue_proyecto"]=self["webpackChunkvue_proyecto"]||[]).push([[468],{7468:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var n=a(4108),s=a(9096);const o={key:0,class:"event__card__container"},r=(0,n.QD)("h2",null,"Eventos guardados",-1),d=["src","alt"],c={class:"event__card__content"},l=["onClick"],u={key:1},i=(0,n.QD)("h2",null,"Sin eventos guardados",-1),v=[i];function h(e,t,a,i,h,p){const _=(0,n.E1)("router-link");return h.saved&&h.saved.length?((0,n.Wz)(),(0,n.An)("section",o,[r,((0,n.Wz)(!0),(0,n.An)(n.ae,null,(0,n.mi)(h.saved,(e=>((0,n.Wz)(),(0,n.An)("article",{key:e.eventId,class:"event__card"},[(0,n.K2)(_,{to:{name:"event",params:{id:e.eventId}}},{default:(0,n.Ql)((()=>[e.eventImageSource?((0,n.Wz)(),(0,n.An)("img",{key:0,src:e.eventImageSource,alt:e.eventName},null,8,d)):(0,n.g1)("",!0),(0,n.QD)("div",c,[(0,n.QD)("h3",null,(0,s.WA)(e.eventName),1)])])),_:2},1032,["to"]),(0,n.QD)("button",{onClick:t=>p.deleteSaved(e.id),class:"event__card__button"},"Borrar",8,l)])))),128))])):!1===h.saved?((0,n.Wz)(),(0,n.An)("section",u,v)):(0,n.g1)("",!0)}a(3248);var p=a(3220);const _=(0,p.I)(["token"]);var k={data(){return{user:null,saved:null}},async created(){const e=await fetch("http://localhost:8000/api/user",{method:"get",headers:{Authorization:"Bearer "+_.get("token")}}),t=await e.json();if(t.message)return _.remove("token",{path:"/"}),void this.$router.push("/");this.user=t,this.updateSaved()},methods:{async deleteSaved(e){await fetch(`http://localhost:8000/api/saved/${e}`,{method:"delete",headers:{Authorization:"Bearer "+_.get("token")}});this.updateSaved()},async updateSaved(){const e=await fetch(`http://localhost:8000/api/saved/${this.user.id}`,{method:"get"}),t=await e.json();t.length?this.saved=t:this.saved=!1}}},g=a(4100);const m=(0,g.c)(k,[["render",h]]);var f=m}}]);
//# sourceMappingURL=468.cc2aacab.js.map