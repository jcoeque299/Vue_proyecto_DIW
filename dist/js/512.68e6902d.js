"use strict";(self["webpackChunkvue_proyecto"]=self["webpackChunkvue_proyecto"]||[]).push([[512],{9940:function(e,r,o){o.d(r,{c:function(){return c}});var a=o(4108),t=o(9096);const s={class:"form__error",id:"formError"};function m(e,r,o,m,l,i){return(0,a.Wz)(),(0,a.An)("div",s,[(0,a.QD)("p",null,(0,t.WA)(this.$props.message),1)])}var l={props:{message:{type:String,required:!1}}},i=o(4100);const n=(0,i.c)(l,[["render",m]]);var c=n},5512:function(e,r,o){o.r(r),o.d(r,{default:function(){return P}});var a=o(4108),t=o(7764),s=o(9096);const m={class:"form__container"},l=(0,a.QD)("h1",null,"Registrarse",-1),i={class:"form__row"},n=(0,a.QD)("div",{class:"form__column__small"},[(0,a.QD)("label",{for:"formName",class:"form__label"},"Nickname")],-1),c={class:"form__column__big"},f={class:"form__row"},u=(0,a.QD)("div",{class:"form__column__small"},[(0,a.QD)("label",{for:"formEmail",class:"form__label"},"Email")],-1),d={class:"form__column__big"},_={class:"form__row"},p=(0,a.QD)("div",{class:"form__column__small"},[(0,a.QD)("label",{for:"formPassword",class:"form__label"},"Contraseña")],-1),h={class:"form__column__big"},v={class:"form__row"},b=(0,a.QD)("div",{class:"form__column__small"},[(0,a.QD)("label",{for:"formLocation",class:"form__label"},"Ubicacion")],-1),g={class:"form__column__big"},E=["value"],w={class:"form__row"};function D(e,r,o,D,Q,$){return(0,a.Wz)(),(0,a.An)("section",m,[l,(0,a.QD)("form",{onSubmit:r[8]||(r[8]=(0,t.Y7)(((...e)=>$.register&&$.register(...e)),["prevent"])),class:"form"},[(0,a.QD)("fieldset",i,[n,(0,a.QD)("div",c,[(0,a.wt)((0,a.QD)("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=e=>Q.formName=e),id:"formName",ref:"formName",name:"nickname",class:"form__input",onBlur:r[1]||(r[1]=e=>$.validateField(this.$refs.formName))},null,544),[[t.Og,Q.formName]])])]),(0,a.QD)("fieldset",f,[u,(0,a.QD)("div",d,[(0,a.wt)((0,a.QD)("input",{type:"text","onUpdate:modelValue":r[2]||(r[2]=e=>Q.formEmail=e),id:"formEmail",ref:"formEmail",name:"email",class:"form__input",onBlur:r[3]||(r[3]=e=>$.validateField(this.$refs.formEmail))},null,544),[[t.Og,Q.formEmail]])])]),(0,a.QD)("fieldset",_,[p,(0,a.QD)("div",h,[(0,a.wt)((0,a.QD)("input",{type:"password","onUpdate:modelValue":r[4]||(r[4]=e=>Q.formPassword=e),id:"formPassword",ref:"formPassword",name:"contraseña",class:"form__input",onBlur:r[5]||(r[5]=e=>$.validateField(this.$refs.formPassword))},null,544),[[t.Og,Q.formPassword]])])]),(0,a.QD)("fieldset",v,[b,(0,a.QD)("div",g,[(0,a.wt)((0,a.QD)("select",{"onUpdate:modelValue":r[6]||(r[6]=e=>Q.formLocation=e),id:"formLocation",class:"form__input"},[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(Q.countryData,(e=>((0,a.Wz)(),(0,a.An)("option",{value:e.code},(0,s.WA)(e.name),9,E)))),256))],512),[[t.Ip,Q.formLocation]])])]),(0,a.QD)("fieldset",w,[(0,a.QD)("button",{onSubmit:r[7]||(r[7]=(...e)=>$.register&&$.register(...e)),class:"form__button",ref:"submitButton",disabled:""},"Registrarse",544)])],32)])}o(3248);var Q=o(3220),$=o(9940),y=o(8094);const A=(0,Q.I)(["token"]);var N={data(){return{formName:"",formEmail:"",formPassword:"",formLocation:y[0].code,countryData:y}},methods:{async register(){const e=await fetch("http://localhost:8000/api/register",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:this.formName,email:this.formEmail,password:this.formPassword,location:this.formLocation})}),r=await e.json();200===r.statusCode?(A.set("token",r.token,{maxAge:86400,sameSite:"strict",path:"/"}),this.$router.push("/profile")):this.createRegisterError()},validateField(e){const r=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;""!==e.value?"email"!==e.name||e.value.toLowerCase().match(r)?"password"===e.type&&e.value.length<8?this.createFormError(`Error, el campo ${e.name} debe contener 8 caracteres como mínimo`,e.parentElement):(this.removeFormError(),this.changeSubmitButton(r)):this.createFormError(`Error, el campo ${e.name} debe contener un email válido`,e.parentElement):this.createFormError(`Error, el campo ${e.name} debe tener un valor`,e.parentElement)},createRegisterError(){const e=(0,a.h)($.c,{message:"Nickname o correo ya registrado"});(0,t.ai)(e,this.$el)},createFormError(e,r){this.$refs.submitButton.setAttribute("disabled",!0);const o=(0,a.h)($.c,{message:e});(0,t.ai)(o,r)},removeFormError(){const e=document.querySelectorAll("#formError");e.forEach((e=>{e.remove()}))},changeSubmitButton(e){""!==this.$refs.formName.value&&""!==this.$refs.formEmail.value&&this.$refs.formEmail.value.toLowerCase().match(e)&&""!==this.$refs.formPassword.value&&this.$refs.submitButton.removeAttribute("disabled")}}},k=o(4100);const F=(0,k.c)(N,[["render",D]]);var P=F}}]);
//# sourceMappingURL=512.68e6902d.js.map