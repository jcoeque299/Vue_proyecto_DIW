{"version":3,"file":"js/744.e3d13576.js","mappings":"qMAAAA,IAAA,EAC0CC,MAAM,0B,GACxCC,EAAAA,EAAAA,IAA0B,UAAtB,qBAAiB,G,EAF7B,Q,GAMqBD,MAAM,wB,EAN3B,Y,GAAAD,IAAA,G,GAeyCE,EAAAA,EAAAA,IAA8B,UAA1B,yBAAqB,G,GAAzBC,G,+DAdtBC,EAAAC,OAASD,EAAAC,MAAMC,SAAM,WAApCC,EAAAA,EAAAA,IAaU,UAbVC,EAaU,CAZNC,IAA0B,aAC1BF,EAAAA,EAAAA,IAUUG,EAAAA,GAAA,MAblBC,EAAAA,EAAAA,IAGsCP,EAAAC,OAAdO,K,WAAhBL,EAAAA,EAAAA,IAUU,WAV4BP,IAAKY,EAAWC,QAASZ,MAAM,e,EACjEa,EAAAA,EAAAA,IAOcC,EAAA,CAPAC,GAAE,CAAAC,KAAA,QAAAC,OAAA,CAAAC,GAA+BP,EAAWC,W,CAJtEO,SAAAC,EAAAA,EAAAA,KAKgB,IAA2E,CAAhET,EAAWU,mBAAgB,WAAtCf,EAAAA,EAAAA,IAA2E,OAL3FP,IAAA,EAKyDuB,IAAKX,EAAWU,kB,OALzEE,KAAAC,EAAAA,EAAAA,IAAA,QAMgBvB,EAAAA,EAAAA,IAIM,MAJNwB,EAIM,EAHFxB,EAAAA,EAAAA,IAEK,WAAAyB,EAAAA,EAAAA,IADEf,EAAWgB,WAAS,QAR/CC,EAAA,G,cAYY3B,EAAAA,EAAAA,IAAuF,UAA9E4B,QAAKC,GAAEC,EAAAC,YAAYrB,EAAWO,IAAKlB,MAAM,uBAAsB,SAAM,EAZ1FiC,Q,UAekC,IAAV9B,EAAAC,QAAK,WAAzBE,EAAAA,EAAAA,IAA6E,UAfjF4B,EAAAC,KAAAX,EAAAA,EAAAA,IAAA,M,uBAoBI,MAAMY,GAAUC,EAAAA,EAAAA,GAAW,CAAC,UAC5B,OACIC,IAAAA,GACI,MAAO,CACHC,KAAM,KACNnC,MAAO,KAEf,EACA,aAAMoC,GACF,MAAMC,QAAiBC,MAAM,iCAAkC,CAC/DC,OAAQ,MACRC,QAAS,CACL,cAAiB,UAAYR,EAAQS,IAAI,YAEvCC,QAAqBL,EAASM,OACpC,GAAID,EAAaE,QAGb,OAFAZ,EAAQa,OAAO,QAAS,CAACC,KAAK,WAC9BC,KAAKC,QAAQC,KAAK,KAGtBF,KAAKZ,KAAOO,EAEZK,KAAKG,aACT,EACAC,QAAS,CACL,iBAAMvB,CAAYpB,SACY8B,MAAO,mCAAkC9B,IAAW,CAC9E+B,OAAQ,SACRC,QAAS,CACL,cAAiB,UAAYR,EAAQS,IAAI,YAE7CM,KAAKG,aACT,EACA,iBAAMA,GACF,MAAME,QAAkBd,MAAO,mCAAkCS,KAAKZ,KAAKrB,KAAM,CACjFyB,OAAQ,QAEFc,QAAsBD,EAAUT,OAClCU,EAAcpD,OACd8C,KAAK/C,MAAQqD,EAGjBN,KAAK/C,OAAQ,CACjB,I,UC1DZ,MAAMsD,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://vue_proyecto/./src/views/WatchedView.vue","webpack://vue_proyecto/./src/views/WatchedView.vue?aca8"],"sourcesContent":["<template>\n    <section v-if=\"saved && saved.length\" class=\"event__card__container\">\n        <h2>Eventos guardados</h2>\n        <article v-for=\"savedEvent in saved\" :key=\"savedEvent.eventId\" class=\"event__card\">\n            <router-link :to=\"{name: 'event', params: {id: savedEvent.eventId}}\">\n                <img v-if=\"savedEvent.eventImageSource\" :src=\"savedEvent.eventImageSource\">\n                <div class=\"event__card__content\">\n                    <h3>\n                        {{ savedEvent.eventName }}\n                    </h3>\n                </div>\n            </router-link>\n            <button @click=\"deleteSaved(savedEvent.id)\" class=\"event__card__button\">Borrar</button>\n        </article>\n    </section>\n    <section v-else-if=\"saved === false\"><h2>Sin eventos guardados</h2></section>\n</template>\n\n<script>\n    import {useCookies} from '@vueuse/integrations/useCookies'\n    const cookies = useCookies([\"token\"])\n    export default {\n        data() {\n            return {\n                user: null,\n                saved: null\n            };\n        },\n        async created() {\n            const userData = await fetch(\"http://localhost:8000/api/user\", {\n            method: 'get',\n            headers: {\n                'Authorization': 'Bearer ' + cookies.get(\"token\")\n            }})\n            const userResponse = await userData.json()\n            if (userResponse.message) {\n                cookies.remove(\"token\", {path:\"/\"})\n                this.$router.push(\"/\")\n                return\n            }\n            this.user = userResponse\n\n            this.updateSaved()\n        },\n        methods: {\n            async deleteSaved(eventId) {\n                const deleteSaved = await fetch(`http://localhost:8000/api/saved/${eventId}`, {\n                method: 'delete',\n                headers: {\n                    'Authorization': 'Bearer ' + cookies.get(\"token\")\n                }})\n                this.updateSaved()\n            },\n            async updateSaved() {\n                const savedData = await fetch(`http://localhost:8000/api/saved/${this.user.id}`, {\n                method: 'get',\n                })\n                const savedResponse = await savedData.json()\n                if (savedResponse.length) {\n                    this.saved = savedResponse\n                    return\n                }\n                this.saved = false\n            }\n        }\n    }\n</script>","import { render } from \"./WatchedView.vue?vue&type=template&id=7b4ff7d5\"\nimport script from \"./WatchedView.vue?vue&type=script&lang=js\"\nexport * from \"./WatchedView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","class","_createElementVNode","_hoisted_7","$data","saved","length","_createElementBlock","_hoisted_1","_hoisted_2","_Fragment","_renderList","savedEvent","eventId","_createVNode","_component_router_link","to","name","params","id","default","_withCtx","eventImageSource","src","_hoisted_3","_createCommentVNode","_hoisted_4","_toDisplayString","eventName","_","onClick","$event","$options","deleteSaved","_hoisted_5","_hoisted_6","_hoisted_8","cookies","useCookies","data","user","created","userData","fetch","method","headers","get","userResponse","json","message","remove","path","this","$router","push","updateSaved","methods","savedData","savedResponse","__exports__","render"],"sourceRoot":""}