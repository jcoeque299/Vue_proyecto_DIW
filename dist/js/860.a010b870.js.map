{"version":3,"file":"js/860.a010b870.js","mappings":"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","sources":["webpack://vue_proyecto/./src/views/EventView.vue","webpack://vue_proyecto/./src/views/EventView.vue?b6b4"],"sourcesContent":["<template>\n    <section v-if=\"event\">\n        <section class=\"event__information\">\n            <article class=\"event__header\">\n                <h2>\n                {{ event.name }}\n                </h2>\n                <img v-if=\"event.images\" :src=\"event.images[0].url\">\n                <!-- <img v-if=\"event.seatmap\" :src=\"event.seatmap.staticUrl\"> -->\n            </article>\n            <article class=\"event__body\">\n                <p v-if=\"!event.dates.start.dateTBD && !event.dates.start.dateTBA\">Fecha del evento: {{ event.dates.start.localDate }}</p>\n                <p v-if=\" event._embedded && event._embedded.venues\">En: {{ event._embedded.venues[0].country.name }}, {{ event._embedded.venues[0].city.name }}</p>\n                <p v-if=\"event.info\">{{ event.info }}</p>\n                <p v-if=\"event.pleaseNote\">{{ event.pleaseNote }}</p>\n                <p v-if=\"event.ticketLimit\">{{ event.ticketLimit.info }}</p>\n                <button v-if=\"event.seatmap\">Ver mapa del recinto</button>\n                <a v-if=\"event.url\" :href=\"event.url\" target=\"_blank\">Comprar entradas</a>\n                <button @click=\"saveEvent\" v-if=\"!saved && user\">Guardar evento</button>\n                <button @click=\"removeEvent\" v-if=\"saved && user\">Borrar evento</button>\n            </article>\n        </section>\n        <section class=\"event__commentbox__container\" v-if=\"user\" :key = \"user\">\n            <h3>Escribe tu comentario</h3>\n            <form @submit.prevent=\"sendComment\">\n                <textarea v-model=\"commentBox\" id=\"commentBox\" class=\"event__commentbox\"></textarea>\n                <button @submit=\"sendComment\" class=\"event__commentbox__button\">Enviar comentario</button>\n            </form>\n        </section>\n        <section v-if=\"comments\" class=\"event__comments\">\n            <h3 >Comentarios</h3>\n            <article v-for=\"comment in comments\" class=\"event__comment\">\n                <div class=\"event__comment__info\">\n                    <p>{{ comment.name }}</p>\n                </div>\n                <div class=\"event__comment__body\">\n                    <p>{{ comment.commentText }}</p>\n                </div>\n            </article>\n        </section>\n    </section>\n</template>\n\n<script>\n    import {useCookies} from '@vueuse/integrations/useCookies'\n    const cookies = useCookies([\"token\"])\n    export default {\n        data() {\n            return {\n                event: null,\n                comments: null,\n                user: null,\n                saved: null,\n                commentBox: \"\",\n                token: cookies.get(\"token\")\n            }\n        },\n        props: {\n            id: {type: String, required: true}\n        },\n        async created() {\n            const eventData = await fetch(`https://app.ticketmaster.com/discovery/v2/events/${this.id}.json?apikey=S1sDAS05dZI5JmtvdarQaZN5tFxkOUpr`)\n            const eventResponse = await eventData.json()\n            this.event = eventResponse\n            cookies.addChangeListener(() => {\n                this.token = cookies.get(\"token\")\n                this.checkUser()\n            })\n        },\n        async mounted() {\n            await this.checkUser()\n            await this.updateComments()\n            await this.checkIfSaved()\n        },\n        methods: {\n            async sendComment() {\n                console.log(this.user.id, this.$props.id, this.commentBox)\n                const commentBoxData = await fetch('http://localhost:8000/api/comments', {\n                    method: \"post\",\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        userId: this.user.id,\n                        eventId: this.$props.id,\n                        commentText: this.commentBox,\n                    })\n                })\n                const commentBoxResponse = await commentBoxData.json()\n                this.updateComments()\n            },\n            async updateComments() {\n                const commentData = await fetch(`http://localhost:8000/api/comments/${this.$props.id}`)\n                const commentResponse = await commentData.json()\n                this.comments = commentResponse\n            },\n            async saveEvent() {\n                const savedEventData = await fetch('http://localhost:8000/api/saved', {\n                    method: \"post\",\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        userId: this.user.id,\n                        eventId: this.$props.id,\n                        eventName: this.event.name,\n                        eventImageSource: this.event.images[0].url\n                    })\n                })\n                this.checkIfSaved()\n            },\n            async removeEvent() {\n                const deleteSaved = await fetch(`http://localhost:8000/api/saved/${this.saved.id}`, {\n                method: 'delete',\n                headers: {\n                    'Authorization': 'Bearer ' + cookies.get(\"token\")\n                }})\n                this.saved = null\n            },\n            async checkUser() {\n                if (this.token) {\n                    const userData = await fetch(\"http://localhost:8000/api/user\", {\n                    method: 'get',\n                    headers: {\n                        'Authorization': 'Bearer ' + cookies.get(\"token\")\n                    }})\n                    const userResponse = await userData.json()\n                    if (userResponse.message) {\n                        cookies.remove(\"token\", {path:\"/\"})\n                    }\n                    else {\n                        this.user = userResponse\n                    }\n                }\n                else {\n                    this.user = null\n                }\n            },\n            async checkIfSaved() {\n                if (this.user) {\n                    const savedData = await fetch(`http://localhost:8000/api/saved/${this.user.id}`, {\n                    method: 'get',\n                    })\n                    const savedResponse = await savedData.json()\n                    const savedEvent = savedResponse.find(savedEvent => savedEvent.eventId === this.$props.id)\n                    if (savedEvent) {\n                        this.saved = savedEvent\n                    }\n                    else {\n                        this.saved = null\n                    }\n                }\n            }\n        }\n    }\n</script>","import { render } from \"./EventView.vue?vue&type=template&id=b173a38a\"\nimport script from \"./EventView.vue?vue&type=script&lang=js\"\nexport * from \"./EventView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","class","_createElementVNode","$data","event","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_toDisplayString","name","images","src","url","_hoisted_4","_createCommentVNode","_hoisted_5","dates","start","dateTBD","dateTBA","_hoisted_6","localDate","_embedded","venues","_hoisted_7","country","city","info","_hoisted_8","pleaseNote","_hoisted_9","ticketLimit","_hoisted_10","seatmap","_hoisted_11","href","target","_hoisted_12","saved","user","onClick","_cache","args","$options","saveEvent","removeEvent","_hoisted_13","onSubmit","_withModifiers","sendComment","$event","commentBox","id","comments","_hoisted_14","_hoisted_15","_Fragment","_renderList","comment","_hoisted_16","_hoisted_17","_hoisted_18","commentText","cookies","useCookies","data","token","get","props","type","String","required","created","eventData","fetch","this","eventResponse","json","addChangeListener","checkUser","mounted","updateComments","checkIfSaved","methods","console","log","$props","commentBoxData","method","headers","body","JSON","stringify","userId","eventId","commentData","commentResponse","eventName","eventImageSource","userData","userResponse","message","remove","path","savedData","savedResponse","savedEvent","find","__exports__","render"],"sourceRoot":""}